import{u as V}from"./useQuery-C30FIoSE.js";import{d as S,I as B,p as F,o as n,c as r,a as o,t as f,j as t,F as y,h as g,D as w,i as N,G as C,b as R,e as $,l as j}from"./index-CKCquulN.js";import{S as z}from"./SkillService-PzQk04pg.js";import{Y as A}from"./yellow_star-CHjFodN-.js";import{u as M}from"./course-content-store-xbCrfk6m.js";import"./api-client-B_CX66F8.js";import"./base-url-qR72hEjy.js";const D={class:"flex-none flex flex-col w-80 px-8 py-8 bg-zinc-50"},T={class:"flex-1 basis-1 flex-col text-black gap-1 overflow-y-auto"},q={class:"flex text-black w-full text-xl text-ellipsis pb-4 border-b"},E={class:"pr-2"},P=["src"],Y=o("div",{class:"py-2"},null,-1),G=["onClick"],K={class:"py-2 pr-2 bg-transparent text-black truncate text-ellipsis"},L=o("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5 5 1 1 5"},null,-1),O=[L],Q=["onClick"],W={class:"text-left truncate text-ellipsis"},H=S({__name:"CourseNavigationBar",props:{courseInfo:{}},setup(b){const i=b.courseInfo,d=M(),{openedModule:a,activeModuleIndex:u,activeTopicIndex:p}=B(d),{resizeModules:m,toggleModule:_,changeTopic:x}=d;return F(()=>{m(i.modules.length)}),(k,s)=>(n(),r("div",D,[o("div",T,[o("div",q,[o("h1",E,f(t(i).name),1),o("img",{src:t(A)},null,8,P)]),Y,(n(!0),r(y,null,g(t(i).modules,(c,e)=>(n(),r("h2",{key:c.name},[o("button",{type:"button",onClick:l=>t(_)(e),class:"flex justify-between items-center w-full"},[o("span",K,f(c.name),1),(n(),r("svg",{class:w([t(a)[e]?"":"rotate-180","w-3 h-3 shrink-0"]),fill:"none",viewBox:"0 0 10 6"},O,2))],8,G),o("div",null,[(n(!0),r(y,null,g(c.topics,(l,v)=>(n(),r("button",{key:l.id,class:w(["relative block w-full box-border h-8 px-4 py-1 border-l-2 hover:text-gray-800",[t(u)==e&&t(p)==v?"text-blue-600 border-black":"text-gray-500 border-gray-200",t(a)[e]||t(u)==e&&t(p)==v?"":"hidden"]]),onClick:I=>t(x)(e,v)},[o("p",W,f(l.name),1)],10,Q))),128))])]))),128))])]))}}),J={class:"flex flex-col w-full bg-white"},U={key:0},X={key:1},Z={key:2,class:"flex h-full"},ie=S({__name:"CourseContentView",setup(b){const h=M(),{introIndex:i}=B(h),{setCourseInfo:d,setActives:a}=h,u=N(),{isPending:p,isError:m,data:_,error:x}=V({queryKey:[`skill/${u.params.id}`],queryFn:async()=>{const s=await z.getCourseInfoByID(u.params.id.toString());return d(s),k(s),s},refetchOnWindowFocus:!1});async function k(s){var c;for(let e=0;e<s.modules.length;e++){if(i.value!=null){C.replace({path:`/course/${s.id}/topic/${s.modules[e].topics[i.value].id}`}),a(e,i.value,0);return}for(let l=0;l<s.modules[e].topics.length;l++)if(s.last_accessed_topic.id==s.modules[e].topics[l].id){C.replace({path:`/course/${s.id}/topic/${s.last_accessed_topic.id}`}),a(e,l,(((c=s.last_accessed_topic.last_accessed_step)==null?void 0:c.order)??1)-1);return}}}return(s,c)=>{const e=R("RouterView");return n(),r("div",J,[t(p)?(n(),r("div",U," Pending... ")):t(m)?(n(),r("div",X,f(t(x)),1)):t(_)?(n(),r("div",Z,[$(H,{"course-info":t(_)},null,8,["course-info"]),$(e)])):j("",!0)])}}});export{ie as default};
