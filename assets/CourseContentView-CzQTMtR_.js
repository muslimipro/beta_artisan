import{u as B}from"./useQuery-Bzp85kGt.js";import{d as $,H as M,p as V,o as r,c,a as n,t as f,j as e,F as y,h as g,D as w,i as F,G as N,b as R,e as C,l as j}from"./index-BEsYm9fI.js";import{S as z}from"./SkillService-BTO001x9.js";import{Y as A}from"./yellow_star-CHjFodN-.js";import{u as S}from"./course-content-store-CQlRld5i.js";import"./api-client-g9B43C0_.js";import"./base-url-qR72hEjy.js";const D={class:"flex-none flex flex-col w-80 px-8 py-8 bg-zinc-50"},T={class:"flex-1 basis-1 flex-col text-black gap-1 overflow-y-auto"},q={class:"flex text-black w-full text-xl text-ellipsis pb-4 border-b"},E={class:"pr-2"},P=["src"],Y=n("div",{class:"py-2"},null,-1),G=["onClick"],H={class:"py-2 pr-2 bg-transparent text-black truncate text-ellipsis"},K=n("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5 5 1 1 5"},null,-1),L=[K],O=["onClick"],Q={class:"text-left truncate text-ellipsis"},W=$({__name:"CourseNavigationBar",props:{courseInfo:{}},setup(k){const l=k.courseInfo,a=S(),{openedModule:i,activeModuleIndex:u,activeTopicIndex:d}=M(a),{resizeModules:p,toggleModule:h,changeTopic:m}=a;return V(()=>{p(l.modules.length)}),(t,_)=>(r(),c("div",D,[n("div",T,[n("div",q,[n("h1",E,f(e(l).name),1),n("img",{src:e(A)},null,8,P)]),Y,(r(!0),c(y,null,g(e(l).modules,(s,o)=>(r(),c("h2",{key:s.name},[n("button",{type:"button",onClick:x=>e(h)(o),class:"flex justify-between items-center w-full"},[n("span",H,f(s.name),1),(r(),c("svg",{class:w([e(i)[o]?"":"rotate-180","w-3 h-3 shrink-0"]),fill:"none",viewBox:"0 0 10 6"},L,2))],8,G),n("div",null,[(r(!0),c(y,null,g(s.topics,(x,b)=>(r(),c("button",{key:x.id,class:w(["relative block w-full box-border h-8 px-4 py-1 border-l-2 hover:text-gray-800",[e(u)==o&&e(d)==b?"text-blue-600 border-black":"text-gray-500 border-gray-200",e(i)[o]||e(u)==o&&e(d)==b?"":"hidden"]]),onClick:Z=>e(m)(o,b)},[n("p",Q,f(x.name),1)],10,O))),128))])]))),128))])]))}}),I={class:"flex flex-col w-full bg-white"},J={key:0},U={key:1},X={key:2,class:"flex h-full"},le=$({__name:"CourseContentView",setup(k){const v=S(),{setCourseInfo:l,setActives:a}=v,i=F(),{isPending:u,isError:d,data:p,error:h}=B({queryKey:[`skill/${i.params.id}`],queryFn:async()=>{const t=await z.getCourseInfoByID(i.params.id.toString());return l(t),m(t),N.replace({path:`/course/${t.id}/topic/${t.last_accessed_topic.id}`}),t},refetchOnWindowFocus:!1});async function m(t){var _;for(let s=0;s<t.modules.length;s++)for(let o=0;o<t.modules[s].topics.length;o++)if(t.last_accessed_topic.id==t.modules[s].topics[o].id){a(s,o,(((_=t.last_accessed_topic.last_accessed_step)==null?void 0:_.order)??1)-1);return}}return(t,_)=>{const s=R("RouterView");return r(),c("div",I,[e(u)?(r(),c("div",J," Pending... ")):e(d)?(r(),c("div",U,f(e(h)),1)):e(p)?(r(),c("div",X,[C(W,{"course-info":e(p)},null,8,["course-info"]),C(s)])):j("",!0)])}}});export{le as default};
