import{u as C}from"./course-content-store-EBJL2aRS.js";import{u as N}from"./useQuery-DiqQkp-A.js";import{S as R}from"./SkillService-T1-GH8jI.js";import{o as r,c as l,a as b,d as S,K as $,f as B,F as T,i as j,q as e,g as u,h as m,s as f,j as _,v as z,l as D,r as E,w as F,t as P,m as x,J as K}from"./index-BysqhvNz.js";import"./api-client-CiB1lw-F.js";import"./base-url-qR72hEjy.js";function L(k,c){return r(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[b("path",{"fill-rule":"evenodd",d:"M8.22 5.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd"})])}const A={class:"flex sticky bottom-0 self-start bg-white border p-2 rounded-lg my-4 mx-8"},J=["onClick"],M=S({__name:"StepNavigationBar",setup(k){const c=C(),{activeStepIndex:o,currentSteps:a}=$(c),{changeStep:w}=c;function y(n){return n=="completed"?"bg-green":n=="attempted"?"bg-yellow":n=="accessed"?"bg-grey":"bg-zinc-200"}return(n,p)=>{const i=B("v-icon");return r(),l("div",A,[(r(!0),l(T,null,j(e(a),(h,t)=>(r(),l("div",{key:h.id,class:"flex items-center"},[b("button",{class:_([y(h.progress),"flex rounded-full w-8 h-8 mx-1 items-center justify-center"]),onClick:v=>e(w)(t)},[e(a)[t].category=="code"?(r(),u(i,{key:0,class:_(["h-6 w-6",e(o)==t?"text-white border-2 border-zinc-200 rounded-full pa-4":"text-black"]),"aria-hidden":"true"},{default:m(()=>[f(" mdi-xml ")]),_:2},1032,["class"])):e(a)[t].category=="scq"?(r(),u(i,{key:1,class:_(["h-6 w-6",e(o)==t?"text-white border-2 border-zinc-200 rounded-full pa-4":"text-black"]),"aria-hidden":"true"},{default:m(()=>[f(" mdi-checkbox-marked-circle-outline ")]),_:2},1032,["class"])):e(a)[t].category=="mcq"?(r(),u(i,{key:2,class:_(["h-6 w-6",e(o)==t?"text-white border-2 border-zinc-200 rounded-full pa-4":"text-black"]),"aria-hidden":"true"},{default:m(()=>[f(" mdi-checkbox-multiple-marked-outline ")]),_:2},1032,["class"])):e(a)[t].category=="video"?(r(),u(i,{key:3,class:_(["h-6 w-6",e(o)==t?"text-white border-2 border-zinc-200 rounded-full pa-4":"text-black"]),"aria-hidden":"true"},{default:m(()=>[f(" mdi-play-circle-outline ")]),_:2},1032,["class"])):(r(),u(i,{key:4,class:_(["h-6 w-6",e(o)==t?"text-white border-2 border-zinc-200 rounded-full pa-4":"text-black"]),"aria-hidden":"true"},{default:m(()=>[f(" mdi-text-box-outline ")]),_:2},1032,["class"]))],10,J),t<e(a).length-1?(r(),u(e(L),{key:0,class:"h-5 w-5","aria-hidden":"true"})):z("",!0)]))),128))])}}}),Q={key:0,class:"p-8"},Z={key:1},G={key:2,class:"flex h-full w-full"},H={class:"flex-1 flex flex-col justify-between items-center pt-8"},ee=S({__name:"CourseTopicView",setup(k){const c=D(),o=C(),{setSteps:a,setActives:w}=o,{currentStepProgress:y,isStepChange:n}=$(o),p=E(""),{isPending:i,isError:h,data:t,error:v,refetch:V}=N({queryKey:["topic",p],queryFn:q});async function q(){var g;const s=await R.getTopicByID(p.value);if(s.steps.forEach(d=>{console.log(`step.id: ${d.id}, ${d.progress}`)}),a(s.steps),!n.value){const d=s.last_accessed_step!=null?s.last_accessed_step.id:s.steps[0].id;K.replace({path:`/course/${c.params.id}/topic/${p.value}/step/${d}`}),w(null,null,(((g=s.last_accessed_step)==null?void 0:g.order)??1)-1)}return s}return F([()=>c.params.topic_id,()=>y.value],([s,g])=>{p.value=c.params.topic_id.toString(),V()},{immediate:!0}),(s,g)=>{const d=B("RouterView");return e(i)?(r(),l("div",Q," Pending... ")):e(h)?(r(),l("div",Z,P(e(v)),1)):e(t)?(r(),l("div",G,[b("div",H,[x(d),x(M)])])):z("",!0)}}});export{ee as default};
