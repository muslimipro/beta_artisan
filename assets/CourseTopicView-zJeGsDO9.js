import{u as C}from"./course-content-store-Cz2nHbMc.js";import{u as q}from"./useQuery-DtKPxzqf.js";import{S as E}from"./SkillService-C9TIj3MB.js";import{o as r,c as l,a as y,d as S,J as $,b as B,F as R,h as T,j as e,k as u,f as m,g as f,E as _,l as z,i as j,r as D,w as F,t as P,e as x,H as L}from"./index-CxZPMcty.js";import"./api-client-Dm1tdKJi.js";import"./base-url-qR72hEjy.js";function A(k,c){return r(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[y("path",{"fill-rule":"evenodd",d:"M8.22 5.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd"})])}const H={class:"flex sticky bottom-0 self-start bg-white border p-2 rounded-lg my-4 mx-8"},J=["onClick"],K=S({__name:"StepNavigationBar",setup(k){const c=C(),{activeStepIndex:o,currentSteps:a}=$(c),{changeStep:b}=c;function w(n){return n=="completed"?"bg-green":n=="attempted"?"bg-yellow":n=="accessed"?"bg-grey":"bg-zinc-200"}return(n,p)=>{const i=B("v-icon");return r(),l("div",H,[(r(!0),l(R,null,T(e(a),(h,t)=>(r(),l("div",{key:h.id,class:"flex items-center"},[y("button",{class:_([w(h.progress),"flex rounded-full w-8 h-8 mx-1 items-center justify-center"]),onClick:v=>e(b)(t)},[e(a)[t].category=="code"?(r(),u(i,{key:0,class:_(["h-6 w-6",e(o)==t?"text-white border-2 border-zinc-200 rounded-full pa-4":"text-black"]),"aria-hidden":"true"},{default:m(()=>[f(" mdi-xml ")]),_:2},1032,["class"])):e(a)[t].category=="scq"?(r(),u(i,{key:1,class:_(["h-6 w-6",e(o)==t?"text-white border-2 border-zinc-200 rounded-full pa-4":"text-black"]),"aria-hidden":"true"},{default:m(()=>[f(" mdi-checkbox-marked-circle-outline ")]),_:2},1032,["class"])):e(a)[t].category=="mcq"?(r(),u(i,{key:2,class:_(["h-6 w-6",e(o)==t?"text-white border-2 border-zinc-200 rounded-full pa-4":"text-black"]),"aria-hidden":"true"},{default:m(()=>[f(" mdi-checkbox-multiple-marked-outline ")]),_:2},1032,["class"])):e(a)[t].category=="video"?(r(),u(i,{key:3,class:_(["h-6 w-6",e(o)==t?"text-white border-2 border-zinc-200 rounded-full pa-4":"text-black"]),"aria-hidden":"true"},{default:m(()=>[f(" mdi-play-circle-outline ")]),_:2},1032,["class"])):(r(),u(i,{key:4,class:_(["h-6 w-6",e(o)==t?"text-white border-2 border-zinc-200 rounded-full pa-4":"text-black"]),"aria-hidden":"true"},{default:m(()=>[f(" mdi-text-box-outline ")]),_:2},1032,["class"]))],10,J),t<e(a).length-1?(r(),u(e(A),{key:0,class:"h-5 w-5","aria-hidden":"true"})):z("",!0)]))),128))])}}}),M={key:0,class:"p-8"},Q={key:1},Z={key:2,class:"flex h-full w-full"},G={class:"flex-1 flex flex-col justify-between items-center pt-8"},ee=S({__name:"CourseTopicView",setup(k){const c=j(),o=C(),{setSteps:a,setActives:b}=o,{currentStepProgress:w,isStepChange:n}=$(o),p=D(""),{isPending:i,isError:h,data:t,error:v,refetch:V}=q({queryKey:["topic",p],queryFn:N});async function N(){var g;const s=await E.getTopicByID(p.value);if(s.steps.forEach(d=>{console.log(`step.id: ${d.id}, ${d.progress}`)}),a(s.steps),!n.value){const d=s.last_accessed_step!=null?s.last_accessed_step.id:s.steps[0].id;L.replace({path:`/course/${c.params.id}/topic/${p.value}/step/${d}`}),b(null,null,(((g=s.last_accessed_step)==null?void 0:g.order)??1)-1)}return s}return F([()=>c.params.topic_id,()=>w.value],([s,g])=>{p.value=c.params.topic_id.toString(),V()},{immediate:!0}),(s,g)=>{const d=B("RouterView");return e(i)?(r(),l("div",M," Pending... ")):e(h)?(r(),l("div",Q,P(e(v)),1)):e(t)?(r(),l("div",Z,[y("div",G,[x(d),x(K)])])):z("",!0)}}});export{ee as default};
