import{u as D}from"./useQuery-bi_TIbF3.js";import{o as s,c as o,a as l,v as U,r as v,d as S,x as C,y as Y,t as w,u as e,F as B,i as T,q as V,k as F,z as A,l as k,b as q,e as m,w as H,s as L,f as O,A as Q,B as W,_ as G,p as J}from"./index-BOBxir3k.js";import{a as $}from"./api-client-BIr9Guy3.js";import{Y as X}from"./yellow_star-CHjFodN-.js";import{m as z}from"./marked.esm-BQIPxdfW.js";import"./base-url-qR72hEjy.js";function ee(t,n){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[l("path",{"fill-rule":"evenodd",d:"M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z","clip-rule":"evenodd"}),l("path",{d:"M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"})])}const M={async getCourseInfoByID(t){return(await $.get("/courses/info/"+t)).data},async getTopicByID(t){return(await $.get("/topics/"+t)).data},async getMdTextByURL(t){return(await $.get(`/${t}`)).data},async getArticleStepByID(t){return(await $.get("/steps/articles/"+t)).data},async getScqStepByID(t){return(await $.get("/steps/scqs/"+t)).data},async checkScqStepByID(t,n){return(await $.patch("/steps/scqs/"+t,{choice:n})).data}},I=U("useCourseContentStore",()=>{const t=v([]),n=v(0),r=v(0),a=v(0),c=v([]);function p(u){t.value=Array.from({length:u},()=>!0)}function i(u){t.value[u]=!t.value[u]}function _(u,h){n.value=u,r.value=h,a.value=0}function d(u){a.value=u}function f(u){c.value=u}return{openedModule:t,activeModuleIndex:n,activeTopicIndex:r,activeStepIndex:a,currentSteps:c,resizeModules:p,toggleModule:i,changeTopic:_,changeStep:d,setSteps:f}}),te={class:"flex-none flex flex-col w-80 px-8 py-8 bg-zinc-50"},se={class:"flex-1 basis-1 flex-col text-black gap-1 overflow-y-auto"},oe={class:"flex text-black w-full text-xl text-ellipsis pb-4 border-b"},ne={class:"pr-2"},ce=["src"],re=l("div",{class:"py-2"},null,-1),ae=["onClick"],ie={class:"py-2 pr-2 bg-transparent text-black truncate text-ellipsis"},le=l("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5 5 1 1 5"},null,-1),ue=[le],de=["onClick"],pe={class:"text-left truncate text-ellipsis"},_e=S({__name:"CourseNavigationBar",props:{courseInfo:{}},setup(t){const r=t.courseInfo,a=I(),{openedModule:c,activeModuleIndex:p,activeTopicIndex:i}=C(a),{resizeModules:_,toggleModule:d,changeTopic:f}=a;return Y(()=>{_(r.modules.length)}),(u,h)=>(s(),o("div",te,[l("div",se,[l("div",oe,[l("h1",ne,w(e(r).name),1),l("img",{src:e(X)},null,8,ce)]),re,(s(!0),o(B,null,T(e(r).modules,(y,x)=>(s(),o("h2",{key:y.name},[l("button",{type:"button",onClick:g=>e(d)(x),class:"flex justify-between items-center w-full"},[l("span",ie,w(y.name),1),(s(),o("svg",{class:V([e(c)[x]?"":"rotate-180","w-3 h-3 shrink-0"]),fill:"none",viewBox:"0 0 10 6"},ue,2))],8,ae),l("div",null,[(s(!0),o(B,null,T(y.topics,(g,b)=>(s(),o("button",{key:g.id,class:V(["relative block w-full box-border h-8 px-4 py-1 border-l-2 hover:text-gray-800",[e(p)==x&&e(i)==b?"text-black border-black":"text-gray-500 border-gray-200",e(c)[x]||e(p)==x&&e(i)==b?"":"hidden"]]),onClick:P=>e(f)(x,b)},[l("p",pe,w(g.name),1)],10,de))),128))])]))),128))])]))}}),ve={key:0,class:"p-8"},fe={key:1},he={key:2,class:"w-10/12"},ye=["innerHTML"],ge=S({__name:"ArticleStepView",setup(t){const n=I(),{activeStepIndex:r,currentSteps:a}=C(n),c=v(""),p=F(()=>z.parse(c.value)),i=v("");A(()=>{r.value!==void 0&&(i.value=a.value[r.value].id.toString())});const{isPending:_,isError:d,data:f,error:u}=D({queryKey:["/steps/articles/",i],queryFn:async()=>{const h=await M.getArticleStepByID(i.value);return c.value=h.content,h}});return(h,y)=>e(_)?(s(),o("div",ve," Pending... ")):e(d)?(s(),o("div",fe,w(e(u)),1)):e(f)?(s(),o("div",he,[l("div",{innerHTML:p.value,class:"markdown-body"},null,8,ye)])):k("",!0)}}),me=t=>(Q("data-v-4c401013"),t=t(),W(),t),xe={key:0,class:"p-8"},we={key:1},ke={key:2},Se=["innerHTML"],be=me(()=>l("br",null,null,-1)),$e=S({__name:"ScqStepView",setup(t){const n=I(),{activeStepIndex:r,currentSteps:a}=C(n),c=v(""),p=F(()=>z.parse(c.value)),i=v(""),_=v([]),d=v(0);A(()=>{r.value!==void 0&&(i.value=a.value[r.value].id.toString())});const{isPending:f,isError:u,data:h,error:y}=D({queryKey:["/steps/scqs/",i],queryFn:async()=>{const g=await M.getScqStepByID(i.value);return c.value=g.content,_.value=g.choices,g}});async function x(){const g=await M.checkScqStepByID(i.value,d.value);console.log(g.passed)}return(g,b)=>{const P=q("v-radio"),E=q("v-radio-group"),N=q("v-btn"),Z=q("v-container");return e(f)?(s(),o("div",xe," Pending... ")):e(u)?(s(),o("div",we,w(e(y)),1)):e(h)?(s(),o("div",ke,[l("div",{innerHTML:p.value,class:"markdown-body"},null,8,Se),be,m(Z,{fluid:""},{default:H(()=>[(s(!0),o(B,null,T(_.value,(j,K)=>(s(),L(E,{modelValue:d.value,"onUpdate:modelValue":b[0]||(b[0]=R=>d.value=R)},{default:H(()=>[m(P,{value:K,label:j.content},null,8,["value","label"])]),_:2},1032,["modelValue"]))),256)),m(N,{onClick:x},{default:H(()=>[O("Submit")]),_:1})]),_:1})])):k("",!0)}}}),Ce=G($e,[["__scopeId","data-v-4c401013"]]),Ie={key:0,class:"w-10/12"},Be={key:1,class:"w-10/12"},Me=S({__name:"StepContentView",setup(t){const n=I(),{activeStepIndex:r,currentSteps:a}=C(n),c=v("");return A(()=>{r.value!==void 0&&(c.value=a.value[r.value].category)}),(p,i)=>(s(),o(B,null,[c.value=="article"?(s(),o("div",Ie,[m(ge)])):k("",!0),c.value=="scq"?(s(),o("div",Be,[m(Ce)])):k("",!0)],64))}});function qe(t,n){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[l("path",{"fill-rule":"evenodd",d:"M8.22 5.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd"})])}const Te={class:"flex sticky bottom-0 self-start bg-white border p-2 rounded-lg my-4 mx-8"},Ve=["onClick"],De=S({__name:"StepNavigationBar",setup(t){const n=I(),{activeStepIndex:r,currentSteps:a}=C(n),{changeStep:c}=n;return(p,i)=>(s(),o("div",Te,[(s(!0),o(B,null,T(e(a),(_,d)=>(s(),o("div",{key:_.id,class:"flex items-center"},[l("button",{class:V([e(r)==d?"bg-black":"bg-zinc-200","flex rounded-full w-8 h-8 mx-1 items-center justify-center"]),onClick:f=>e(c)(d)},[m(e(ee),{class:V(["h-6 w-6",e(r)==d?"text-white":"text-black"]),"aria-hidden":"true"},null,8,["class"])],10,Ve),d<e(a).length-1?(s(),L(e(qe),{key:0,class:"h-5 w-5","aria-hidden":"true"})):k("",!0)]))),128))]))}}),Ae={key:0,class:"p-8"},He={key:1},Pe={key:2,class:"flex h-full"},Fe={class:"flex-1 flex flex-col justify-between items-center pt-8"},Le=S({__name:"CourseTopicView",props:{courseInfo:{}},setup(t){const r=t.courseInfo,a=I(),{activeModuleIndex:c,activeTopicIndex:p}=C(a),{setSteps:i}=a,_=v("");A(()=>{c.value!==void 0&&p.value!==void 0&&(_.value=r.modules[c.value].topics[p.value].id.toString())});const{isPending:d,isError:f,data:u,error:h}=D({queryKey:["topic",_],queryFn:async()=>{const y=await M.getTopicByID(_.value);return i(y.steps),y}});return(y,x)=>e(d)?(s(),o("div",Ae," Pending... ")):e(f)?(s(),o("div",He,w(e(h)),1)):e(u)?(s(),o("div",Pe,[l("div",Fe,[m(Me),m(De)])])):k("",!0)}}),ze={class:"flex flex-col w-full"},Ee={key:0},Ne={key:1},Ze={key:2,class:"flex h-full"},Qe=S({__name:"CourseContentView",setup(t){const n=J(),{isPending:r,isError:a,data:c,error:p}=D({queryKey:[`skill/${n.params.id}`],queryFn:()=>M.getCourseInfoByID(n.params.id.toString()),refetchOnWindowFocus:!1});return(i,_)=>(s(),o("div",ze,[e(r)?(s(),o("div",Ee," Pending... ")):e(a)?(s(),o("div",Ne,w(e(p)),1)):e(c)?(s(),o("div",Ze,[m(_e,{"course-info":e(c)},null,8,["course-info"]),m(Le,{"course-info":e(c)},null,8,["course-info"])])):k("",!0)]))}});export{Qe as default};
