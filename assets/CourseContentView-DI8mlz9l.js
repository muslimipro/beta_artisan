import{u as V}from"./useQuery-DtqSEWn3.js";import{o as t,c as s,a as i,v as E,r as y,d as k,x as b,y as F,t as x,u as e,F as T,i as I,q as w,k as H,z,l as C,e as m,s as L,p as P}from"./index-CTYQO7xe.js";import{a as B}from"./api-client-BYxAcs9Y.js";import{Y as A}from"./yellow_star-CHjFodN-.js";import{m as D}from"./marked.esm-BQIPxdfW.js";import{u as N}from"./utils-Dlzf5KNW.js";import"./base-url-qR72hEjy.js";function Z(o,n){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[i("path",{"fill-rule":"evenodd",d:"M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z","clip-rule":"evenodd"}),i("path",{d:"M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"})])}const q={async getCourseInfoByID(o){return(await B.get("/courses/info/"+o)).data},async getTopicByID(o){return(await B.get("/topics/"+o)).data},async getMdTextByURL(o){return(await B.get(`/${o}`)).data}},$=E("useCourseContentStore",()=>{const o=y([]),n=y(0),c=y(0),a=y(0),r=y([]);function u(l){o.value=Array.from({length:l},()=>!0)}function d(l){o.value[l]=!o.value[l]}function p(l,v){n.value=l,c.value=v,a.value=0}function _(l){a.value=l}function f(l){r.value=l}return{openedModule:o,activeModuleIndex:n,activeTopicIndex:c,activeStepIndex:a,currentSteps:r,resizeModules:u,toggleModule:d,changeTopic:p,changeStep:_,setSteps:f}}),j={class:"flex-none flex flex-col w-80 px-8 py-8 bg-zinc-50"},R={class:"flex-1 basis-1 flex-col text-black gap-1 overflow-y-auto"},K={class:"flex text-black w-full text-xl text-ellipsis pb-4 border-b"},Q={class:"pr-2"},U=["src"],Y=i("div",{class:"py-2"},null,-1),O=["onClick"],W={class:"py-2 pr-2 bg-transparent text-black truncate text-ellipsis"},G=i("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5 5 1 1 5"},null,-1),J=[G],X=["onClick"],ee={class:"text-left truncate text-ellipsis"},te=k({__name:"CourseNavigationBar",props:{courseInfo:{}},setup(o){const c=o.courseInfo,a=$(),{openedModule:r,activeModuleIndex:u,activeTopicIndex:d}=b(a),{resizeModules:p,toggleModule:_,changeTopic:f}=a;return F(()=>{p(c.modules.length)}),(l,v)=>(t(),s("div",j,[i("div",R,[i("div",K,[i("h1",Q,x(e(c).name),1),i("img",{src:e(A)},null,8,U)]),Y,(t(!0),s(T,null,I(e(c).modules,(h,g)=>(t(),s("h2",{key:h.name},[i("button",{type:"button",onClick:S=>e(_)(g),class:"flex justify-between items-center w-full"},[i("span",W,x(h.name),1),(t(),s("svg",{class:w([e(r)[g]?"":"rotate-180","w-3 h-3 shrink-0"]),fill:"none",viewBox:"0 0 10 6"},J,2))],8,O),i("div",null,[(t(!0),s(T,null,I(h.topics,(S,M)=>(t(),s("button",{key:S.id,class:w(["relative block w-full box-border h-8 px-4 py-1 border-l-2 hover:text-gray-800",[e(u)==g&&e(d)==M?"text-black border-black":"text-gray-500 border-gray-200",e(r)[g]||e(u)==g&&e(d)==M?"":"hidden"]]),onClick:me=>e(f)(g,M)},[i("p",ee,x(S.name),1)],10,X))),128))])]))),128))])]))}}),se={key:0,class:"p-8"},oe={key:1},ne={key:2,class:"w-10/12"},re=["innerHTML"],ce=k({__name:"StepContentView",setup(o){const n=$(),{activeStepIndex:c,currentSteps:a}=b(n),r=y(""),u=H(()=>D.parse(r.value)),d=y("");z(()=>{c.value!==void 0&&(d.value=N(a.value[c.value].path))});const{isPending:p,isError:_,data:f,error:l}=V({queryKey:["md",d],queryFn:async()=>{const v=await q.getMdTextByURL(d.value);return r.value=v,v}});return(v,h)=>e(p)?(t(),s("div",se," Pending... ")):e(_)?(t(),s("div",oe,x(e(l)),1)):e(f)?(t(),s("div",ne,[i("div",{innerHTML:u.value,class:"markdown-body"},null,8,re)])):C("",!0)}});function ae(o,n){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[i("path",{"fill-rule":"evenodd",d:"M8.22 5.22a.75.75 0 0 1 1.06 0l4.25 4.25a.75.75 0 0 1 0 1.06l-4.25 4.25a.75.75 0 0 1-1.06-1.06L11.94 10 8.22 6.28a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd"})])}const ie={class:"flex sticky bottom-0 self-start bg-white border p-2 rounded-lg my-4 mx-8"},le=["onClick"],ue=k({__name:"StepNavigationBar",setup(o){const n=$(),{activeStepIndex:c,currentSteps:a}=b(n),{changeStep:r}=n;return(u,d)=>(t(),s("div",ie,[(t(!0),s(T,null,I(e(a),(p,_)=>(t(),s("div",{key:p.id,class:"flex items-center"},[i("button",{class:w([e(c)==_?"bg-black":"bg-zinc-200","flex rounded-full w-8 h-8 mx-1 items-center justify-center"]),onClick:f=>e(r)(_)},[m(e(Z),{class:w(["h-6 w-6",e(c)==_?"text-white":"text-black"]),"aria-hidden":"true"},null,8,["class"])],10,le),_<e(a).length-1?(t(),L(e(ae),{key:0,class:"h-5 w-5","aria-hidden":"true"})):C("",!0)]))),128))]))}}),de={key:0,class:"p-8"},pe={key:1},_e={key:2,class:"flex h-full"},fe={class:"flex-1 flex flex-col justify-between items-center pt-8"},ve=k({__name:"CourseTopicView",props:{courseInfo:{}},setup(o){const c=o.courseInfo,a=$(),{activeModuleIndex:r,activeTopicIndex:u}=b(a),{setSteps:d}=a,p=y("");z(()=>{r.value!==void 0&&u.value!==void 0&&(p.value=c.modules[r.value].topics[u.value].id.toString())});const{isPending:_,isError:f,data:l,error:v}=V({queryKey:["topic",p],queryFn:async()=>{const h=await q.getTopicByID(p.value);return d(h.steps),h}});return(h,g)=>e(_)?(t(),s("div",de," Pending... ")):e(f)?(t(),s("div",pe,x(e(v)),1)):e(l)?(t(),s("div",_e,[i("div",fe,[m(ce),m(ue)])])):C("",!0)}}),he={class:"flex flex-col w-full"},ye={key:0},ge={key:1},xe={key:2,class:"flex h-full"},Be=k({__name:"CourseContentView",setup(o){const n=P(),{isPending:c,isError:a,data:r,error:u}=V({queryKey:[`skill/${n.params.id}`],queryFn:()=>q.getCourseInfoByID(n.params.id.toString()),refetchOnWindowFocus:!1});return(d,p)=>(t(),s("div",he,[e(c)?(t(),s("div",ye," Pending... ")):e(a)?(t(),s("div",ge,x(e(u)),1)):e(r)?(t(),s("div",xe,[m(te,{"course-info":e(r)},null,8,["course-info"]),m(ve,{"course-info":e(r)},null,8,["course-info"])])):C("",!0)]))}});export{Be as default};
